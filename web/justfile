set dotenv-load

# List available commands
default:
    just --list --unsorted

# Run in dev mode
run-dev: prepare
    #!/bin/zsh

    export DAVS_SERVER_BASE_URL="http://127.0.0.1:8000"

    pnpm run dev

# Run app
run: build
    #!/bin/zsh

    export DAVS_SERVER_BASE_URL="http://127.0.0.1:8000"

    pnpm start

# Build app
build: prepare
    pnpm build

# Test
test:
    pnpm run test

# Lint
lint:
    pnpm run lint

# Run quality checks
quality: lint typecheck

# Format code
format:
    pnpm run format

# Prepare project for development
prepare: install-modules build-locales

# Bootstrap project
bootstrap: prepare

# Build locales
build-locales:
    pnpm run locales:build

# Validate types are correct
typecheck:
    pnpm run typecheck

[private]
install-modules:
    npm i --force
